<mat-progress-bar mode="indeterminate" *ngIf="progress"></mat-progress-bar>
<!-- Date navigation start -->

<section class="top-button-section">
    <span>
        <button class="calenderNav" (click)="clickPrevious()" mat-raised-button color="primary"
            i18n="@@previous">Previous</button>

        <button class="calenderNav" (click)="clickToday()" mat-raised-button color="primary"
            i18n="@@today">Today</button>
        <button class="calenderNav" (click)="clickNext()" mat-raised-button color="primary" i18n="@@next">Next</button>
        <mat-form-field appearance="fill" *ngIf="patterns && patterns.length > 0">
          <mat-label i18n="@@schedulePattern">Schedule Patterns</mat-label>
          <mat-select [(ngModel)]="selectedPattern" (selectionChange)="onSchedulePatternChanged()">
            <mat-option *ngFor="let pattern of patterns" [value]="pattern">
              {{pattern.schedulePatternName}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <button class="calenderNav" mat-raised-button color="primary"
          *ngIf="selectedPattern && selectedPattern.schedulePatternId != 0 && selectedPattern.createdUser.userId == getUserId()"
          (click)="onEditPatternClicked()" i18n="@@editPattern">Edit Pattern</button>
        <button class="calenderNav" mat-raised-button color="primary" (click)="onAddPatternClicked()" i18n="@@addPattern">Add Pattern</button>
        <h3> {{ viewDate | date:'MMMM yyyy'}}</h3>
    </span>
    <span>
        <mat-checkbox style="margin: 0 10px;" [(ngModel)]="smallTable" i18n="@@smallTable"
            (change)="onclickSmallTable()">Small Table</mat-checkbox>
    </span>
</section>

<!-- Date Navigation end -->
<div class="table-container mat-elevation-z8"
    [ngClass]="{'normalTable': smallTable == false, 'smallTable': smallTable == true}">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
        <ng-container matColumnDef="setName" sticky>
            <th mat-header-cell *matHeaderCellDef i18n="@@productSetName"> Set Name </th>
            <td mat-cell *matCellDef="let data;let i = index" [attr.rowspan]="getRowSpanSet('setName', i)"
                [style.display]="!isTheSame('setName', i) ? '' : 'none'" [ngStyle]="changeColor(data,'set')">
                {{ data.setName}} </td>
            <!-- <td mat-foote  r-cell *matFooterCellDef> Total </td> -->
        </ng-container>
        <ng-container matColumnDef="obicNo" sticky>
            <th mat-header-cell *matHeaderCellDef i18n="@@obicNo"> Obic No </th>
            <td mat-cell *matCellDef="let data;let i = index" [attr.rowspan]="getRowSpan('obicNo', i)"
                [style.display]="!isTheSameI('obicNo', i) ? '' : 'none'" [ngStyle]="changeColor(data)">
                {{ data.obicNo }} </td>
            <!-- <td mat-footer-cell *matFooterCellDef> null </td> -->
        </ng-container>
        <ng-container matColumnDef="productName" sticky>
            <th mat-header-cell *matHeaderCellDef i18n="@@productName"> Product Name </th>
            <td mat-cell *matCellDef="let data;let i = index" [attr.rowspan]="getRowSpan('productName', i)"
                [style.display]="!isTheSameI('productName', i) ? '' : 'none'" [ngStyle]="changeColor(data)">
                {{ data.productName }} </td>
            <!-- <td mat-footer-cell *matFooterCellDef> null </td> -->
        </ng-container>
        <ng-container matColumnDef="description" sticky>
            <th mat-header-cell *matHeaderCellDef i18n="@@description"> Description </th>
            <td mat-cell *matCellDef="let data;let i = index" [attr.rowspan]="getRowSpan('description', i)"
                [style.display]="!isTheSameI('description', i) ? '' : 'none'" [ngStyle]="changeColor(data)">
                {{ data.description }} </td>
            <!-- <td mat-footer-cell *matFooterCellDef> null </td> -->
        </ng-container>
        <ng-container matColumnDef="values" sticky>
            <th mat-header-cell *matHeaderCellDef> </th>
            <td mat-cell *matCellDef="let data" class="bold" [ngStyle]="changeColor(data)">
                {{ data.values }} </td>
            <!-- <td mat-footer-cell *matFooterCellDef> null </td> -->
        </ng-container>

        <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns.slice(5)">
            <th mat-header-cell *matHeaderCellDef> {{column}} </th>
            <td mat-cell *matCellDef="let element" (click)="clickOrder(element[column])" class="dates"
                [ngStyle]="changeColor(element,column)">
                {{element[column].quantity}}
            </td>
            <!-- <td mat-footer-cell *matFooterCellDef matTooltip="My Name is Khaan" class="forecastOrders"> My
                            Name is Khaan
                        </td> -->
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnsToDisplay; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
        <!-- <tr mat-footer-row *matFooterRowDef="columnsToDisplay"></tr> -->
    </table>
</div>
<!-- <button mat-raised-button matTooltip="Info about the action" matTooltipPosition="right"
                aria-label="Button that displays a tooltip in various positions">
                Action
            </button> -->
